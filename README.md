## –≠—Ç–∞–ø 3: –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

### 1. –ü–æ–ª—É—á–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∞–ª–≥–æ—Ä–∏—Ç–º–æ–º DFS –±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏
```python
def build_dependency_graph_dfs(self, start_package, repo_url, test_mode=False, filter_substring=""):
    """–ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π —Å –ø–æ–º–æ—â—å—é DFS –±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏"""
    # –°—Ç–µ–∫ —Å–æ–¥–µ—Ä–∂–∏—Ç (—Ç–µ–∫—É—â–∏–π_–ø–∞–∫–µ—Ç, –ø—É—Ç—å_–æ—Ç_–∫–æ—Ä–Ω—è)
    stack = [(start_package, [])]
    visited = set()
    graph = {}
    cycles = []
    
    while stack:
        current_package, path = stack.pop()
        
        # –ü—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–∞–∫–µ—Ç—ã –ø–æ —Ñ–∏–ª—å—Ç—Ä—É
        if self.should_filter_package(current_package, filter_substring):
            print(f"   üö´ –ü–∞–∫–µ—Ç '{current_package}' –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω")
            graph[current_package] = []
            continue
        
        # –ï—Å–ª–∏ –ø–∞–∫–µ—Ç —É–∂–µ –≤ –≥—Ä–∞—Ñ–µ, –ø—Ä–æ–ø—É—Å–∫–∞–µ–º –ø–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
        if current_package not in graph:
            dependencies = self.get_direct_dependencies(current_package, repo_url, test_mode)
            dependency_names = list(dependencies.keys())
            graph[current_package] = dependency_names
            print(f"   üì¶ {current_package} -> {dependency_names}")
        
        # –û–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏
        for dep in reversed(graph[current_package]):
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ü–∏–∫–ª–∏—á–µ—Å–∫—É—é –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å
            if dep in path:
                cycle_start = path.index(dep)
                cycle = path[cycle_start:] + [current_package, dep]
                if cycle not in cycles:
                    cycles.append(cycle)
                    print(f"   üîÅ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: {' -> '.join(cycle)}")
                continue
            
            # –î–æ–±–∞–≤–ª—è–µ–º –≤ —Å—Ç–µ–∫ –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–µ–≥–æ –æ–±—Ö–æ–¥–∞
            if dep not in visited:
                visited.add(dep)
                stack.append((dep, path + [current_package]))
    
    return graph, cycles
```

### 2. –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–∞–∫–µ—Ç–æ–≤ –ø–æ –ø–æ–¥—Å—Ç—Ä–æ–∫–µ
```python
def should_filter_package(self, package_name, filter_substring):
    """–ü—Ä–æ–≤–µ—Ä–∫–∞, –Ω—É–∂–Ω–æ –ª–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤–∞—Ç—å –ø–∞–∫–µ—Ç"""
    if not filter_substring:
        return False
    return filter_substring.lower() in package_name.lower()
```

### 3. –û–±—Ä–∞–±–æ—Ç–∫–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```python
# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–æ–π –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏ –≤ –∞–ª–≥–æ—Ä–∏—Ç–º–µ DFS
if dep in path:
    cycle_start = path.index(dep)
    cycle = path[cycle_start:] + [current_package, dep]
    if cycle not in cycles:
        cycles.append(cycle)
        print(f"   üîÅ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: {' -> '.join(cycle)}")
    continue
```

### 4. –†–µ–∂–∏–º —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è —Å –ø–∞–∫–µ—Ç–∞–º–∏ –≤ –≤–µ—Ä—Ö–Ω–µ–º —Ä–µ–≥–∏—Å—Ç—Ä–µ
```python
def get_dependencies_from_test_file(self, package_name, file_path):
    """–ü–æ–ª—É—á–µ–Ω–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –∏–∑ —Ç–µ—Å—Ç–æ–≤–æ–≥–æ —Ñ–∞–π–ª–∞"""
    try:
        with open(file_path, 'r', encoding='utf-8') as f:
            data = json.load(f)
    except FileNotFoundError:
        raise Exception(f"–§–∞–π–ª '{file_path}' –Ω–µ –Ω–∞–π–¥–µ–Ω")
    except json.JSONDecodeError as e:
        raise Exception(f"–û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞ JSON —Ñ–∞–π–ª–∞: {e}")
    
    # –ò—â–µ–º –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –ø–∞–∫–µ—Ç–µ –≤ —Ç–µ—Å—Ç–æ–≤–æ–º —Ñ–∞–π–ª–µ
    if isinstance(data, dict):
        # –ï—Å–ª–∏ —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ–± –æ–¥–Ω–æ–º –ø–∞–∫–µ—Ç–µ
        if data.get('name') == package_name or 'dependencies' in data:
            return data.get('dependencies', {})
        # –ï—Å–ª–∏ —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é –æ –Ω–µ—Å–∫–æ–ª—å–∫–∏—Ö –ø–∞–∫–µ—Ç–∞—Ö
        elif package_name in data:
            package_data = data[package_name]
            if isinstance(package_data, dict) and 'dependencies' in package_data:
                return package_data['dependencies']
            elif isinstance(package_data, dict):
                return package_data
    elif isinstance(data, list):
        # –ï—Å–ª–∏ —Ñ–∞–π–ª —Å–æ–¥–µ—Ä–∂–∏—Ç —Å–ø–∏—Å–æ–∫ –ø–∞–∫–µ—Ç–æ–≤
        for package in data:
            if package.get('name') == package_name:
                return package.get('dependencies', {})
    
    return {}
```

## –î–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π

### –¢–µ—Å—Ç 1: –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º - –ø—Ä–æ—Å—Ç–æ–π –≥—Ä–∞—Ñ –±–µ–∑ —Ü–∏–∫–ª–æ–≤
```bash
python dependency_visualizer.py --package "A" --repo "test_repo_complex.json" --test-mode --output "graph.svg"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üéØ –ê–Ω–∞–ª–∏–∑ –ø–∞–∫–µ—Ç–∞: A
üîß –†–µ–∂–∏–º: —Ç–µ—Å—Ç–æ–≤—ã–π
============================================================
üîç –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DFS –±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏):
   üì¶ A -> ['B', 'C']
   üì¶ C -> ['D', 'E']
   üì¶ E -> []
   üì¶ D -> []
   üì¶ B -> ['D']
============================================================
üå≥ –ü–æ–ª–Ω—ã–π –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –ø–∞–∫–µ—Ç–∞ 'A':
   A -> ['B', 'C']
   B -> ['D']
   C -> ['D', 'E']
   D -> []
   E -> []

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   –í—Å–µ–≥–æ –ø–∞–∫–µ—Ç–æ–≤ –≤ –≥—Ä–∞—Ñ–µ: 5
   –ü–∞–∫–µ—Ç–æ–≤ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏: 3
   –¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 0

‚úÖ –≠—Ç–∞–ø 3 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω.
```

### –¢–µ—Å—Ç 2: –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
```bash
python dependency_visualizer.py --package "A" --repo "test_repo_complex.json" --test-mode --output "graph.svg" --filter "D"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üéØ –ê–Ω–∞–ª–∏–∑ –ø–∞–∫–µ—Ç–∞: A
üîß –†–µ–∂–∏–º: —Ç–µ—Å—Ç–æ–≤—ã–π
üö´ –§–∏–ª—å—Ç—Ä: 'D'
============================================================
üîç –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DFS –±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏):
   üì¶ A -> ['B', 'C']
   üì¶ C -> ['D', 'E']
   üö´ –ü–∞–∫–µ—Ç 'D' –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω
   üì¶ E -> []
   üì¶ B -> ['D']
   üö´ –ü–∞–∫–µ—Ç 'D' –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω
============================================================
üå≥ –ü–æ–ª–Ω—ã–π –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –ø–∞–∫–µ—Ç–∞ 'A':
   A -> ['B', 'C']
   B -> []
   C -> ['E']
   E -> []

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   –í—Å–µ–≥–æ –ø–∞–∫–µ—Ç–æ–≤ –≤ –≥—Ä–∞—Ñ–µ: 4
   –ü–∞–∫–µ—Ç–æ–≤ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏: 2
   –¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 0

‚úÖ –≠—Ç–∞–ø 3 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω.
```

### –¢–µ—Å—Ç 3: –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º - —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏–µ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

–°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª `test_repo_cycle.json`:
```json
{
  "A": {
    "dependencies": {
      "B": "^1.0.0"
    }
  },
  "B": {
    "dependencies": {
      "C": "^1.0.0"
    }
  },
  "C": {
    "dependencies": {
      "A": "^1.0.0"
    }
  }
}
```

```bash
python dependency_visualizer.py --package "A" --repo "test_repo_cycle.json" --test-mode --output "graph.svg"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üéØ –ê–Ω–∞–ª–∏–∑ –ø–∞–∫–µ—Ç–∞: A
üîß –†–µ–∂–∏–º: —Ç–µ—Å—Ç–æ–≤—ã–π
============================================================
üîç –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DFS –±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏):
   üì¶ A -> ['B']
   üì¶ B -> ['C']
   üì¶ C -> ['A']
   üîÅ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: A -> B -> C -> A
============================================================
‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 1
   1. A -> B -> C -> A

üå≥ –ü–æ–ª–Ω—ã–π –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –ø–∞–∫–µ—Ç–∞ 'A':
   A -> ['B']
   B -> ['C']
   C -> ['A']

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   –í—Å–µ–≥–æ –ø–∞–∫–µ—Ç–æ–≤ –≤ –≥—Ä–∞—Ñ–µ: 3
   –ü–∞–∫–µ—Ç–æ–≤ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏: 3
   –¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 1

‚úÖ –≠—Ç–∞–ø 3 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω.
```

### –¢–µ—Å—Ç 4: –†–µ–∞–ª—å–Ω—ã–π —Ä–µ–∂–∏–º - Express —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
```bash
python dependency_visualizer.py --package "express" --repo "https://registry.npmjs.org" --output "graph.svg" --filter "debug"
```

### –¢–µ—Å—Ç 5: –¢–µ—Å—Ç–æ–≤—ã–π —Ä–µ–∂–∏–º - –ø–∞–∫–µ—Ç –±–µ–∑ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
```bash
python dependency_visualizer.py --package "simple-package" --repo "test_repo_no_deps.json" --test-mode --output "graph.svg"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üéØ –ê–Ω–∞–ª–∏–∑ –ø–∞–∫–µ—Ç–∞: simple-package
üîß –†–µ–∂–∏–º: —Ç–µ—Å—Ç–æ–≤—ã–π
============================================================
üîç –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DFS –±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏):
   üì¶ simple-package -> []
============================================================
üå≥ –ü–æ–ª–Ω—ã–π –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –ø–∞–∫–µ—Ç–∞ 'simple-package':
   simple-package -> []

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   –í—Å–µ–≥–æ –ø–∞–∫–µ—Ç–æ–≤ –≤ –≥—Ä–∞—Ñ–µ: 1
   –ü–∞–∫–µ—Ç–æ–≤ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏: 0
   –¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 0

‚úÖ –≠—Ç–∞–ø 3 —É—Å–ø–µ—à–Ω–æ –∑–∞–≤–µ—Ä—à–µ–Ω.
```

### –¢–µ—Å—Ç 6: –°–ª–æ–∂–Ω—ã–π —Ü–∏–∫–ª —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π

–°–æ–∑–¥–∞–¥–∏–º —Ñ–∞–π–ª `test_repo_complex_cycle.json`:
```json
{
  "A": {
    "dependencies": {
      "B": "^1.0.0",
      "C": "^1.0.0"
    }
  },
  "B": {
    "dependencies": {
      "D": "^1.0.0"
    }
  },
  "C": {
    "dependencies": {
      "B": "^1.0.0"
    }
  },
  "D": {
    "dependencies": {
      "A": "^1.0.0"
    }
  }
}
```

```bash
python dependency_visualizer.py --package "A" --repo "test_repo_complex_cycle.json" --test-mode --output "graph.svg" --filter "C"
```

**–û–∂–∏–¥–∞–µ–º—ã–π –≤—ã–≤–æ–¥:**
```
üéØ –ê–Ω–∞–ª–∏–∑ –ø–∞–∫–µ—Ç–∞: A
üîß –†–µ–∂–∏–º: —Ç–µ—Å—Ç–æ–≤—ã–π
üö´ –§–∏–ª—å—Ç—Ä: 'C'
============================================================
üîç –ü–æ—Å—Ç—Ä–æ–µ–Ω–∏–µ –≥—Ä–∞—Ñ–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π (DFS –±–µ–∑ —Ä–µ–∫—É—Ä—Å–∏–∏):
   üì¶ A -> ['B', 'C']
   üì¶ B -> ['D']
   üì¶ D -> ['A']
   üîÅ –û–±–Ω–∞—Ä—É–∂–µ–Ω–∞ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∞—è –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—å: A -> B -> D -> A
   üö´ –ü–∞–∫–µ—Ç 'C' –æ—Ç—Ñ–∏–ª—å—Ç—Ä–æ–≤–∞–Ω
============================================================
‚ö†Ô∏è –û–±–Ω–∞—Ä—É–∂–µ–Ω–æ —Ü–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 1
   1. A -> B -> D -> A

üå≥ –ü–æ–ª–Ω—ã–π –≥—Ä–∞—Ñ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –ø–∞–∫–µ—Ç–∞ 'A':
   A -> ['B', 'C']
   B -> ['D']
   D -> ['A']
   C -> (–Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π)

üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:
   –í—Å–µ–≥–æ –ø–∞–∫–µ—Ç–æ–≤ –≤ –≥—Ä–∞—Ñ–µ: 4
   –ü–∞–∫–µ—Ç–æ–≤ —Å –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏: 3
   –¶–∏–∫–ª–∏—á–µ—Å–∫–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π: 1
```